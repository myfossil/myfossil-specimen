!function(o){"use strict";function n(){var n="http://paleobiodb.org/data1.1/taxa/list.json?name="+o("#fossil-taxon-name").val()+"&rel=all_parents&vocab=pbdb";o.ajax({type:"post",url:n,dataType:"json",success:function(n){n.records.forEach(function(n){n=l(n),o("#fossil-taxon-"+n.rank).text(n.taxon_name)})},error:function(o){console.log(o)}})}function t(n){if(!(0>=n)){var t="http://paleobiodb.org/data1.1/taxa/single.json?show=img&vocab=pbdb&id="+n,a="http://paleobiodb.org/data1.1/taxa/thumb.png?id=",s=o("<img />").addClass("phylopic");return o.ajax({url:t,type:"GET",dataType:"json",success:function(o){var n=o.records.pop();n.image_no&&s.attr("src",a+n.image_no)}}),s}}function a(t){o("td#fossil-taxon-"+t.rank).text(t.taxon_name),o("#fossil-taxon-name").val(t.taxon_name),o("#fossil-taxon-rank").val(t.taxon_rank),o("#fossil-taxon-pbdb").val(t.taxon_no),s(),n()}function s(){var n=["phylum","class","order","family","genus","species"];o.map(n,function(n){o("#fossil-taxon-"+n).html('<span class="unknown">Unknown</span>')})}function i(){var n=o("#myfossil_specimen_nonce").val(),t=parseInt(o("#post_id").val()),a=o("#fossil-taxon-name").val(),s=o("#fossil-taxon-rank").val(),i=o("#fossil-taxon-pbdb").val(),e={name:a,rank:s,pbdb:i};o.ajax({async:!1,type:"post",url:ajaxurl,data:{action:"myfossil_save_taxon",nonce:n,post_id:t,taxon:e},dataType:"json",success:function(){o("#fossil-taxon-success").show().fadeOut()},complete:function(){o("#fossil-taxon-loading").hide()},error:function(n){console.error(n),o("#fossil-taxon-error").show().fadeOut()}})}function e(){if(!(parseInt(o(this).val().length)<3)){var n=o("ul#edit-fossil-taxon-results"),s="http://paleobiodb.org/data1.1/taxa/auto.json?limit=20&vocab=pbdb&name="+o(this).val();o.ajax({url:s,type:"GET",dataType:"json",success:function(s){n.empty(),o.map(s.records,function(s){if(s=l(s),s.misspelling)return!0;var i=o("<li></li>").addClass("hover-hand").append(t(s.taxon_no)).append(" ").append(s.taxon_name).click(function(){a(l(s))});n.append(i)})},error:function(o){console.log(o)}})}}function l(o){return o.rank=o.rank?c(o.rank):o.taxon_rank,o.taxon_rank=o.taxon_rank?c(o.taxon_rank):o.rank,o}function c(o){var n=o.split("");return"sub"==n.slice(0,3)?n.slice(3).join(""):"infra"==n.slice(0,4)?n.slice(4).join(""):"super"==n.slice(0,5)?n.slice(5).join(""):o}o(function(){n(),o("#edit-fossil-taxon-name").keyup(e),o("#edit-fossil-taxon").popup({type:"tooltip",opacity:1,background:!1,transition:"all 0.2s",closetransitionend:i,onclose:function(){o("#fossil-taxon-loading").show()}})})}(jQuery),function(o){"use strict";function n(){var n=["length","width","height"];o.map(n,function(n){var t=o("input#edit-fossil-dimension-"+n),a=o("td#fossil-dimension-"+n);o.isNumeric(a.attr("value"))&&t.val(a.attr("value")),t.keyup(function(){o.isNumeric(t.val())&&a.text(t.val()+" cm").attr("value",t.val())})})}function t(){var t=o("#post_id").val(),a=o("#myfossil_specimen_nonce").val(),s=o("#edit-fossil-dimension-length").val(),i=o("#edit-fossil-dimension-width").val(),e=o("#edit-fossil-dimension-height").val();o.ajax({async:!1,type:"post",url:ajaxurl,dataType:"json",data:{action:"myfossil_save_dimensions",nonce:a,post_id:t,length:s,width:i,height:e},success:function(n){console.log(n),o("#fossil-dimensions-success").show().fadeOut()},complete:function(){o("#fossil-dimensions-loading").hide(),n()},error:function(n){console.error(n),o("#fossil-dimensions-error").show().fadeOut()}})}o(function(){n(),o("#edit-fossil-dimensions").popup({type:"tooltip",opacity:1,background:!1,transition:"all 0.2s",closetransitionend:t,onclose:function(){o("#fossil-dimensions-loading").show()}})})}(jQuery),function(o){"use strict";function n(){var n="http://paleobiodb.org/data1.1/intervals/list.json?scale=1&vocab=pbdb";o.ajax({type:"post",url:n,dataType:"json",success:function(n){var t,a=[];n.records.forEach(function(n){a[n.interval_no]=n,o("#fossil-time_interval-name").val()==n.interval_name&&(t=n.interval_no)});for(var s=a[t];s;)o("#geochronology-"+s.level).text(s.interval_name),s=a[s.parent_no]},error:function(o){console.log(o)}})}function t(){var n=o("#myfossil_specimen_nonce").val(),t=parseInt(o("#post_id").val()),a=o("#fossil-geochronology-name").val(),s=(o("#fossil-geochronology-level").val(),o("#fossil-geochronology-pbdb").val()),s=o("#fossil-geochronology-color").val(),i={name:a,level:geochronology_level,pbdb:s,color:geochronology_color};o.ajax({async:!1,type:"post",url:ajaxurl,data:{action:"myfossil_save_geochronology",nonce:n,post_id:t,geochronology:i},dataType:"json",success:function(){o("#fossil-geochronology-success").show().fadeOut()},complete:function(){o("#fossil-geochronology-loading").hide()},error:function(n){console.error(n),o("#fossil-geochronology-error").show().fadeOut()}})}o(function(){n(),o("#edit-fossil-geochronology").popup({type:"tooltip",opacity:1,background:!1,transition:"all 0.2s",closetransitionend:t,onclose:function(){o("#fossil-geochronology-loading").show()}})})}(jQuery),function(){"use strict"}(jQuery),function(o){"use strict";function n(){var n=new google.maps.LatLng(parseFloat(o("#fossil-location-latitude").text()),parseFloat(o("#fossil-location-longitude").text())),t={center:n,zoom:14,mapTypeId:google.maps.MapTypeId.SATELLITE},a=new google.maps.Marker({position:n,map:s,title:o("#fossil-taxon-name").val(),clickable:!1}),s=new google.maps.Map(document.getElementById("map-container"),t);a.setMap(s)}function t(){var n=["latitude","longitude","country","state","county","city"];o.map(n,function(n){o("#edit-fossil-location-"+n).val(o("#fossil-location-"+n).text().trim()),o("#edit-fossil-location-"+n).keyup(function(){o("#fossil-location-"+n).text(o("#edit-fossil-location-"+n).val())})})}function a(){var n=o("#myfossil_specimen_nonce").val(),t=parseInt(o("#post_id").val()),a={},s=["latitude","longitude","country","state","county","city"];o.map(s,function(n){a[n]=o("#edit-fossil-location-"+n).val()}),o.ajax({async:!1,type:"post",url:ajaxurl,data:{action:"myfossil_save_location",nonce:n,post_id:t,location:a},dataType:"json",success:function(){o("#fossil-location-success").show().fadeOut()},complete:function(){o("#fossil-location-loading").hide()},error:function(n){console.error(n),o("#fossil-location-error").show().fadeOut()}})}o(function(){google.maps.event.addDomListener(window,"load",n),t(),o("#edit-fossil-location").popup({type:"tooltip",opacity:1,background:!1,transition:"all 0.2s",closetransitionend:a,onclose:function(){o("#fossil-location-loading").show()}})})}(jQuery);